
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Registering a whole-brain dataset to the Allen Mouse Brain atlas with brainreg &#8212; BrainGlobe</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1227d6e8" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script src="../_static/documentation_options.js?v=f539c95a"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/brainreg';</script>
    <link rel="canonical" href="https://brainglobe.info/tutorials/brainreg.html" />
    <link rel="icon" href="../_static/brainglobe.png"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Silicon probe tracking" href="silicon-probe-tracking.html" />
    <link rel="prev" title="Tutorials" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/brainglobe.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/brainglobe.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
    <p class="title logo__title">BrainGlobe</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../about.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../documentation/index.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../more.html">
                        More
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/brainglobe" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/brain_globe" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../about.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../documentation/index.html">
                        Documentation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../more.html">
                        More
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/brainglobe" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/brain_globe" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Index</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Registering a whole-brain dataset to the Allen Mouse Brain atlas with brainreg</a></li>
<li class="toctree-l1"><a class="reference internal" href="silicon-probe-tracking.html">Silicon probe tracking</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="cellfinder-cli/index.html">Whole brain cell detection and registration with the cellfinder command line tool</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cellfinder-cli/setting-up.html">Setting up</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellfinder-cli/running-cellfinder.html">Running cellfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellfinder-cli/visualising-the-results.html">Visualising the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellfinder-cli/exploring-the-numerical-results.html">Exploring the numerical results</a></li>
<li class="toctree-l2"><a class="reference internal" href="cellfinder-cli/visualising-your-data-in-brainrender.html">Visualising your data in brainrender</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tracing-tracking.html">Analyze and visualize bulk fluorescence tracing data</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Registering...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="registering-a-whole-brain-dataset-to-the-allen-mouse-brain-atlas-with-brainreg">
<h1>Registering a whole-brain dataset to the Allen Mouse Brain atlas with brainreg<a class="headerlink" href="#registering-a-whole-brain-dataset-to-the-allen-mouse-brain-atlas-with-brainreg" title="Link to this heading">#</a></h1>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>For full information on how to use brainreg, please see the <a class="reference internal" href="../documentation/brainreg/index.html"><span class="doc std std-doc">brainreg page</span></a></p>
</div>
<section id="setting-up">
<h2>Setting up<a class="headerlink" href="#setting-up" title="Link to this heading">#</a></h2>
<p>To test out brainreg, we supply a small mouse brain dataset to get you started. To begin:</p>
<ul class="simple">
<li><p>Download the data from <a class="reference external" href="https://gin.g-node.org/cellfinder/data/raw/master/brainreg/test_brain.zip">here</a> (the dataset is ~10MB, so it should download quickly).</p></li>
<li><p>Unzip the data to a directory of your choice (doesn’t matter where). You should end up with a directory called <code class="docutils literal notranslate"><span class="pre">test_brain</span></code> with 270 <code class="docutils literal notranslate"><span class="pre">.tif</span></code> images</p></li>
</ul>
<p>To run brainreg, you need to know:</p>
<ul class="simple">
<li><p>Where your data is (in this case, it’s the path to the <code class="docutils literal notranslate"><span class="pre">test_brain</span></code> directory)</p></li>
<li><p>Where you want to save the output data (we’ll just save it into a directory called <code class="docutils literal notranslate"><span class="pre">brainreg_output</span></code>in the same directory as the <code class="docutils literal notranslate"><span class="pre">test_brain</span></code>)</p></li>
<li><p>The pixel sizes of your data in microns (see <a class="reference internal" href="../documentation/general/image-definition.html"><span class="doc std std-doc">Image definition</span></a> for details).
In this case, our data is 40μm per pixel in the coronal plane, and the spacing of the planes is 50μm.</p></li>
<li><p>The orientation of your data. The software needs to know how you acquired your data (coronal, sagittal etc.). For this
BrainGlobe uses <a class="reference internal" href="../documentation/bg-space/index.html"><span class="doc std std-doc">bg-space</span></a>. For this tutorial, the orientation is <code class="docutils literal notranslate"><span class="pre">psl</span></code>, which means
that the data origin is the most <strong>p</strong>osterior, <strong>s</strong>uperior, <strong>l</strong>eft voxel. For more details see
<a class="reference internal" href="../documentation/general/image-definition.html"><span class="doc std std-doc">Image definition</span></a></p></li>
<li><p>Which atlas you want to use (the list of available atlases is available <a class="reference internal" href="../documentation/bg-atlasapi/usage/atlas-details.html"><span class="doc std std-doc">here</span></a>).
In this case, we want to use a mouse atlas (as that’s what our data is), and we’ll use the 50μm version of the <a class="reference external" href="https://mouse.brain-map.org/static/atlas">Allen Mouse Brain Atlas</a></p></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>In this tutorial we will use the 50μm version of the <a class="reference external" href="https://mouse.brain-map.org/static/atlas">Allen Mouse Brain Atlas</a>.
Low-resolution atlases like this are usually only used for testing (the registration will work much quicker at lower resolution).
In this case, the test input data is very low resolution, so using a higher resolution atlas doesn’t make much sense.</p>
<p>When using your own data, you’ll probably find that higher resolution atlases provide better results.
Make sure to test out the different resolutions to see what works best.</p>
</div>
</section>
<section id="running-the-registration">
<h2>Running the registration<a class="headerlink" href="#running-the-registration" title="Link to this heading">#</a></h2>
<p>There are two ways to run the registration using brainreg.
If you’re just getting started, we recommend the <a class="reference external" href="https://napari.org/stable">napari</a> plugin.
This provides a graphical user interface, and makes it easier to tweak parameters.</p>
<p>If you need to run brainreg on many samples, or on a remote machine
(e.g., using an institutional high-performance computing system), there is a command-line interface.</p>
<p>Whichever interface you use, the results will be identical.</p>
<div class="dropdown admonition">
<p class="admonition-title">Registration using the napari plugin</p>
<h2 class="rubric" id="before-you-start">Before you start</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://napari.org/stable/tutorials/fundamentals/installation.html">Make sure you have napari installed</a></p></li>
<li><p>Install the brainreg-napari plugin from within napari (<code class="docutils literal notranslate"><span class="pre">Plugins</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Install/Uninstall</span> <span class="pre">Package(s)</span></code>, choosing <code class="docutils literal notranslate"><span class="pre">brainreg-napari</span></code>).)</p></li>
<li><p>Open napari</p></li>
</ul>
<h2 class="rubric" id="run-brainreg">Run brainreg</h2>
<p>To run brainreg, we firstly need to load the data, by dragging and dropping the <code class="docutils literal notranslate"><span class="pre">test_brain</span></code> directory into the main
napari window. Then load the plugin by selecting <code class="docutils literal notranslate"><span class="pre">brainreg-register:</span> <span class="pre">Atlas</span> <span class="pre">registration</span></code> from the napari <code class="docutils literal notranslate"><span class="pre">Plugins</span></code> menu.</p>
<p>In the plugin, set all the necessary parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Image</span> <span class="pre">layer</span></code> - Set this to the <code class="docutils literal notranslate"><span class="pre">test_brain</span></code> image layer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Atlas</span></code> - Set this to <code class="docutils literal notranslate"><span class="pre">allen_mouse_50um</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">orientation</span></code> - Set this to <code class="docutils literal notranslate"><span class="pre">psl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Voxel</span> <span class="pre">size</span> <span class="pre">(z)</span></code> - Set to 50</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Voxel</span> <span class="pre">size</span> <span class="pre">(x)</span></code> - Set to 40</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Voxel</span> <span class="pre">size</span> <span class="pre">(y)</span></code> - Set to 40</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">directory</span></code> - Click <code class="docutils literal notranslate"><span class="pre">Choose</span> <span class="pre">directory</span></code>, and create a new directory in the same directory as</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_brain</span></code> called <code class="docutils literal notranslate"><span class="pre">brainreg_output</span></code></p></li>
</ul>
<p>Make sure the image layer is deselected on the left-hand side, and then you should see something like this
(N.B. the visualised plane and the contrast of the brain has been adjusted):</p>
<p><img alt="brainreg-napari" src="../_images/brainreg-napari.webp" /></p>
<p>You can then click <code class="docutils literal notranslate"><span class="pre">Run</span></code>, and the registration will start. Lots of stuff will get printed to the
console as brainreg runs, and when it’s done (it should only take a minute or so), you will see something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="o">-</span> <span class="n">MainProcess</span> <span class="n">cli</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">230</span> <span class="o">-</span> <span class="n">Finished</span><span class="o">.</span> <span class="n">Total</span> <span class="n">time</span> <span class="n">taken</span><span class="p">:</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">29.15</span>
</pre></div>
</div>
<p>This means that the registration is complete, but the results will appear in the napari window.
Toggling the visibility of the <code class="docutils literal notranslate"><span class="pre">Boundaries</span></code> layer (click the eye icon) is the easiest way to assess registration accuracy.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Registration using the command line tool</p>
<h2 class="rubric" id="instructions">Instructions:</h2>
<h3 class="rubric" id="id1">Setting up</h3>
<ul class="simple">
<li><p>Open a terminal (Linux/macOS) or your command prompt (Windows)</p></li>
<li><p>Activate your <a class="reference internal" href="../documentation/general/conda.html"><span class="doc std std-doc">conda environment</span></a></p></li>
</ul>
<h3 class="rubric" id="id2">Run brainreg</h3>
<p>To run brainreg, you need to pass:</p>
<ul class="simple">
<li><p>The path to the sample data</p></li>
<li><p>The path to the directory to save the results</p></li>
<li><p>The voxel sizes</p></li>
<li><p>The orientation</p></li>
<li><p>The atlas to use</p></li>
</ul>
<p>We put this all together in a single command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brainreg</span> <span class="n">test_brain</span> <span class="n">brainreg_output</span> <span class="o">-</span><span class="n">v</span> <span class="mi">50</span> <span class="mi">40</span> <span class="mi">40</span>  <span class="o">--</span><span class="n">orientation</span> <span class="n">psl</span> <span class="o">--</span><span class="n">atlas</span> <span class="n">allen_mouse_50um</span>
</pre></div>
</div>
<p>Lots of output will get printed to the console as brainreg runs, and when it’s done (it should only take a minute or
so), you will see something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span> <span class="o">-</span> <span class="n">MainProcess</span> <span class="n">cli</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">230</span> <span class="o">-</span> <span class="n">Finished</span><span class="o">.</span> <span class="n">Total</span> <span class="n">time</span> <span class="n">taken</span><span class="p">:</span> <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">29.15</span>
</pre></div>
</div>
<p>This means that the registration is complete.</p>
<h3 class="rubric" id="visualising-the-results">Visualising the results</h3>
<p>brainreg comes with a plugin for <a class="reference external" href="https://napari.org/">napari</a> (see
<a class="reference internal" href="../documentation/brainreg/user-guide/visualisation.html"><span class="std std-doc">Visualisation</span></a>) for easy visualisation of the results.</p>
<p>To view your data, run <code class="docutils literal notranslate"><span class="pre">napari</span></code> from the same terminal/command as you ran brainreg (or open a new one and activate
your conda environment). You can then drag and drop the <code class="docutils literal notranslate"><span class="pre">brainreg_output</span></code> directory into napari, and see the results.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The results are likely not perfect because (for speed and simplicity) we:</p>
<ul class="simple">
<li><p>Used very low-resolution data</p></li>
<li><p>Use a low-resolution atlas</p></li>
<li><p>Left all the parameters as default (which were optimised for higher resolution atlases)</p></li>
</ul>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorials</p>
      </div>
    </a>
    <a class="right-next"
       href="silicon-probe-tracking.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Silicon probe tracking</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up">Setting up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-registration">Running the registration</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
Created using <a href="https://sphinx-doc.org/">Sphinx</a> 7.2.6.
<br/>
</p>
<p class="theme-version">
Built with the
<a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
0.14.1.
</p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>